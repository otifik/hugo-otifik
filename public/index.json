[{"content":"åŒºåˆ« åœ¨apkå®‰è£…çš„æ—¶å€™ï¼Œmipmap-xxx/ä¸‹çš„æ‰€æœ‰åˆ†è¾¨ç‡çš„å›¾ç‰‡éƒ½ä¼šä¿ç•™ï¼Œè€Œdrawablexxx/ä¸‹çš„å›¾ç‰‡åªæœ‰ä¿ç•™é€‚é…è®¾å¤‡åˆ†è¾¨ç‡çš„å›¾ç‰‡ï¼Œå…¶ä½™å›¾ç‰‡ä¼šä¸¢å¼ƒæ‰ï¼Œå‡å°‘äº†APPå®‰è£…å¤§å°ã€‚\nItâ€™s best practice to place your app icons in mipmap- folders (not the drawable-folders) because they are used at resolutions different from the deviceâ€™s current densityã€‚â€”â€”from Android Developers Blog\nUsing a mipmap as the source for your bitmap or drawable is a simple way to provide a quality image and various image scales, which can be particularly useful if you expect your image to be scaled during an animation. â€”â€”from android-4.3\nif you are building different versions of your app for different densities, you should know about the â€œmipmapâ€ resource directory. This is exactly like â€œdrawableâ€ resources, except it does not participate in density stripping when creating the different apk targets. â€”â€”from Google+ Message\nç”¨æ³• mipmapxxx/ä¸‹æ”¾ç½®APPå¯åŠ¨å›¾æ ‡ï¼Œä»¥åŠéœ€è¦é«˜è´¨é‡ç¼©æ”¾åŠ¨ç”»çš„å›¾ç‰‡ã€‚ å…¶ä»–å›¾ç‰‡èµ„æºæ”¾åœ¨drawablexxx/ä¸‹\n","permalink":"https://www.otifik.xyz/posts/tech/android-mipmap-drawable/","summary":"åŒºåˆ« åœ¨apkå®‰è£…çš„æ—¶å€™ï¼Œmipmap-xxx/ä¸‹çš„æ‰€æœ‰åˆ†è¾¨ç‡çš„å›¾ç‰‡éƒ½ä¼šä¿ç•™ï¼Œè€Œdrawablexxx/ä¸‹çš„å›¾ç‰‡åªæœ‰ä¿ç•™é€‚é…è®¾å¤‡åˆ†è¾¨ç‡çš„å›¾ç‰‡ï¼Œå…¶ä½™å›¾ç‰‡ä¼šä¸¢å¼ƒæ‰ï¼Œå‡å°‘äº†APPå®‰è£…å¤§å°ã€‚\nItâ€™s best practice to place your app icons in mipmap- folders (not the drawable-folders) because they are used at resolutions different from the deviceâ€™s current densityã€‚â€”â€”from Android Developers Blog\nUsing a mipmap as the source for your bitmap or drawable is a simple way to provide a quality image and various image scales, which can be particularly useful if you expect your image to be scaled during an animation.","title":"Android mipmapä¸drawableåŒºåˆ«"},{"content":"æ³›å‹æ“¦é™¤æœºåˆ¶ï¼šç¼–è¯‘å™¨ä¼šå°†Tè¿™æ ·çš„æ³›å‹æ“¦é™¤æˆObjectï¼Œè™šæ‹Ÿæœºæœ¬èº«æ˜¯ä¸çŸ¥é“æ³›å‹çš„ã€‚Javaçš„æ³›å‹æ˜¯ç”±ç¼–è¯‘å™¨åœ¨ç¼–è¯‘æ—¶å®è¡Œçš„ï¼Œç¼–è¯‘å™¨å†…éƒ¨æ°¸è¿œæŠŠæ‰€æœ‰ç±»å‹Tè§†ä¸ºObjectå¤„ç†ï¼Œä½†æ˜¯ï¼Œåœ¨éœ€è¦è½¬å‹çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨ä¼šæ ¹æ®Tçš„ç±»å‹è‡ªåŠ¨ä¸ºæˆ‘ä»¬å®è¡Œå®‰å…¨åœ°å¼ºåˆ¶è½¬å‹ã€‚\nç¼–è¯‘å™¨çœ‹åˆ°çš„ä»£ç ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 public class Foo\u0026lt;T\u0026gt;{ private T bar; public Foo(T bar) { this.bar = bar; } public T getBar() { return bar; } public void setBar(T bar) { this.bar = bar; } } è™šæ‹Ÿæœºçœ‹åˆ°çš„ä»£ç ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 public class Foo{ private Object bar; public Foo(Object bar) { this.bar = bar; } public Object getBar() { return bar; } public void setBar(Object bar) { this.bar = bar; } } extendsé€šé…ç¬¦/åå˜ java extendsé€šé…ç¬¦ \u0026lt;? extends T\u0026gt;å…è®¸è°ƒç”¨è¯»æ–¹æ³•T get()è·å–Tçš„å¼•ç”¨ï¼Œä½†ä¸å…è®¸è°ƒç”¨å†™æ–¹æ³•set(T)ä¼ å…¥Tçš„å¼•ç”¨ï¼ˆä¼ å…¥nullé™¤å¤–ï¼‰ï¼›åå˜ã€‚outï¼Œç±»ä¼¼äºfun(T: Number)ã€‚\nè¿™æ®µä»£ç ä¸­ï¼ŒFooæ˜¯ä¸€ä¸ªæ³›å‹ç±»å‹ï¼Œæœ‰ä¸€ä¸ªbarå‚æ•°ï¼ŒMainç±»ä¸­çš„staticæ–¹æ³•resetåŒ…å«ä¸€ä¸ªFooç±»å‹çš„å‚æ•°fã€‚mainå‡½æ•°è¿è¡Œï¼Œåˆ›å»ºä¸€ä¸ªFooç±»å‹çš„å˜é‡ä¼ å…¥resetä¸­ï¼Œè™½ç„¶Integeræ˜¯Numberçš„å­ç±»ï¼Œä½†æ˜¾ç„¶Fooå¹¶ä¸æ˜¯Fooçš„å­ç±»ï¼Œä½†æ˜¯å¦‚æœèƒ½ç¼–è¯‘é€šè¿‡ï¼Œresetå‡½æ•°ä¸­fè°ƒç”¨getBarå¾—åˆ°ä¸€ä¸ªIntegerç±»å‹çš„å€¼èµ‹å€¼ç»™Numberæ˜¯å®Œå…¨å¯è¡Œçš„ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 public class Main { public static void main(String[] args) { Foo\u0026lt;Integer\u0026gt; f = new Foo\u0026lt;Integer\u0026gt;(100); int res = reset(f); //\u0026#39;reset(Foo\u0026lt;java.lang.Number\u0026gt;)\u0026#39; in \u0026#39;Main\u0026#39; cannot be applied to \u0026#39;(Foo\u0026lt;java.lang.Integer\u0026gt;)\u0026#39; System.out.println(res); } static int reset(Foo\u0026lt;Number\u0026gt; f){ Number bar = f.getBar(); return bar.intValue(); } } class Foo\u0026lt;T\u0026gt;{ private T bar; public Foo(T bar) { this.bar = bar; } public T getBar() { return bar; } public void setBar(T bar) { this.bar = bar; } } æ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä½¿ç”¨\u0026lt;? extends T\u0026gt;è¿™æ ·çš„ä¸Šç•Œé€šé…ç¬¦ï¼Œæ¥è®©â€œFooæˆä¸ºFooçš„å­ç±»å‹â€ï¼Œé™¤æ­¤ä¹‹å¤–å¯ä»¥ä¼ å…¥Fooã€Fooç­‰ç±»å‹ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 public class Main { public static void main(String[] args) { Foo\u0026lt;Integer\u0026gt; f = new Foo\u0026lt;Integer\u0026gt;(100); int res = reset(f); System.out.println(res); } static int reset(Foo\u0026lt;? extends Number\u0026gt; f){ Number bar = f.getBar(); return bar.intValue(); } } class Foo\u0026lt;T\u0026gt;{ private T bar; public Foo(T bar) { this.bar = bar; } public T getBar() { return bar; } public void setBar(T bar) { this.bar = bar; } } ä½†æ˜¯éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œresetä¸­ä¸èƒ½è°ƒç”¨setBarå‡½æ•°ï¼Œå› ä¸ºfçš„ç±»å‹æ˜¯ä¸æ˜ç¡®çš„ï¼Œæ˜¯Foo\u0026lt;? extends Number\u0026gt;ï¼Œå®ƒæ—¢å¯èƒ½æ˜¯ç¬¦åˆè¦æ±‚çš„Fooï¼Œä¹Ÿå¯èƒ½æ˜¯Fooï¼Œç±»å‹è½¬æ¢ä¼šå‡ºç°å¼‚å¸¸ã€‚å¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 public class Main { public static void main(String[] args) { Foo\u0026lt;Integer\u0026gt; f = new Foo\u0026lt;Integer\u0026gt;(100); int res = reset(f); System.out.println(res); } static int reset(Foo\u0026lt;? extends Number\u0026gt; f){ Number bar = f.getBar(); f.setBar(new Integer(1)); //æŠ¥é”™ï¼š\u0026#39;setBar(capture\u0026lt;? extends java.lang.Number\u0026gt;)\u0026#39; in \u0026#39;Foo\u0026#39; cannot be applied to \u0026#39;(java.lang.Integer)\u0026#39; return f.getBar().intValue(); } } class Foo\u0026lt;T\u0026gt;{ private T bar; public Foo(T bar) { this.bar = bar; } public T getBar() { return bar; } public void setBar(T bar) { this.bar = bar; } } è¿™æ˜¯\u0026lt;? extends T\u0026gt;çš„ä¸€ä¸ªé‡è¦é™åˆ¶ï¼Œset\u0026lt;? extends T\u0026gt;æ–¹æ³•æ— æ³•ä¼ é€’ä»»ä½•Tçš„å­ç±»å‹ç»™set\u0026lt;? extends T\u0026gt;ã€‚ é€šä¿—æ˜“æ‡‚çš„è§£é‡Šï¼Œæˆ‘å¯ä»¥å»æ‹¿è¿™ä¸ªé‡Œé¢çš„ä¸œè¥¿ï¼Œä½†æ˜¯æƒ³è¦æ”¹å˜è¿™ä¸ªä¸œè¥¿çš„è¯ï¼Œç”±äºæˆ‘ä¸çŸ¥é“ä»–æ˜¯ä»€ä¹ˆç±»å‹çš„ï¼Œä¸€æ—¦è¿›è¡Œæ”¹å˜å°±å¯èƒ½ä¼šå‡ºç°ç±»å‹è½¬æ¢å¼‚å¸¸ã€‚ æˆ‘æ‹¥æœ‰å­ç±»çš„èƒ½åŠ›å»å–ä¸œè¥¿ï¼Œä½†æˆ‘è¦å»æ”¹å˜çš„æ—¶å€™ï¼Œæˆ‘ä¸çŸ¥é“ä»–çš„ç±»å‹æ˜¯ä»€ä¹ˆã€‚\nè¿™é‡Œå”¯ä¸€çš„ä¾‹å¤–æ˜¯å¯ä»¥ç»™æ–¹æ³•å‚æ•°ä¼ å…¥nullï¼š\n1 2 f.setBar(null); // ok, ä½†æ˜¯åé¢ä¼šæŠ›å‡ºNullPointerException f.getBar(); // NullPointerException kotlin åå˜ kotlinä¸­çš„æ³›å‹åå˜äº¦æ˜¯å¦‚æ­¤ã€‚ ä¸Šé¢çš„javaä¾‹å­æ”¹é€ æˆkotlinï¼Œå¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 fun main() { val f = Foo(100) val res = reset(f) //æŠ¥é”™ï¼šType mismatch: inferred type is Foo\u0026lt;Int\u0026gt; but Foo\u0026lt;Number\u0026gt; was expected println(res) } fun reset(f: Foo\u0026lt;Number\u0026gt;): Int{ val bar = f.bar return bar.toInt() } class Foo\u0026lt;T\u0026gt;(var bar: T) è¿™æ—¶kotlinå¯ä»¥åˆ©ç”¨outå…³é”®å­—è¿›è¡Œæ³›å‹çš„åå˜ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 fun main() { val f = Foo(100) val res = reset(f) println(res) } fun reset(f: Foo\u0026lt;out Number\u0026gt;): Int{ val bar = f.bar return bar.toInt() } class Foo\u0026lt;T\u0026gt;(var bar: T) outä»å­—é¢æ„æ€ä¸Šæ¥ç†è§£å°±æ˜¯åªèƒ½æ‹¿å–è·å¾—ï¼Œå¯ä»¥è¯»ä¸å¯å†™çš„æ„æ€ï¼Œå¯¹åº”getï¼ŒæŠ¥é”™åŸå› åŒä¸Šï¼Œè¿™é‡Œä¸åœ¨è¿›è¡Œè§£é‡Šäº†ã€‚\nsuperé€šé…ç¬¦/é€†å˜ java superé€šé…ç¬¦ \u0026lt;? super T\u0026gt;å…è®¸è°ƒç”¨å†™æ–¹æ³•set(T)ä¼ å…¥Tçš„å¼•ç”¨ï¼Œä½†ä¸å…è®¸è°ƒç”¨è¯»æ–¹æ³•T get()è·å–Tçš„å¼•ç”¨ï¼ˆè·å–Objecté™¤å¤–ï¼‰ã€‚é€†å˜ã€‚in\nè¿™æ®µä»£ç ä¸­ï¼ŒFooæ˜¯ä¸€ä¸ªæ³›å‹ç±»å‹ï¼Œæœ‰ä¸€ä¸ªbarå‚æ•°ï¼ŒMainç±»ä¸­çš„staticæ–¹æ³•resetåŒ…å«ä¸€ä¸ªFooç±»å‹çš„å‚æ•°få’Œä¸€ä¸ªIntegerç±»å‹çš„iã€‚mainå‡½æ•°è¿è¡Œï¼Œåˆ›å»ºä¸€ä¸ªFooç±»å‹çš„å˜é‡f1ä¼ å…¥resetä¸­ï¼Œæ­£å¸¸å¯ä»¥é€šè¿‡ç¼–è¯‘ï¼›æ¥ç€åˆ›å»ºä¸€ä¸ªFooç±»å‹çš„å˜é‡f2ä¼ å…¥resetä¸­ï¼Œå¯ä»¥å‘ç°ç¼–è¯‘å™¨æŠ¥é”™äº†ï¼ŒåŸå› æ˜¯ç±»å‹ä¸åŒ¹é…ï¼Œä½†å‡å¦‚è¿™æ®µä»£ç ç¼–è¯‘èƒ½å¤Ÿé€šè¿‡ï¼ŒFooç±»å‹çš„f2å˜é‡å®Œå…¨å¯ä»¥è°ƒç”¨setBaræ¥æŠŠNumberç±»å‹çš„barå€¼è®¾ç½®ä¸ºä¸€ä¸ªIntegerç±»å‹ï¼Œå› ä¸ºIntegerç±»å‹æ˜¯Numberç±»å‹çš„å­ç±»ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 public class Main { public static void main(String[] args) { Foo\u0026lt;Integer\u0026gt; f1 = new Foo\u0026lt;Integer\u0026gt;(100); Foo\u0026lt;Number\u0026gt; f2 = new Foo\u0026lt;\u0026gt;(200); reset(f1,new Integer(1)); reset(f2,new Integer(1)); //æŠ¥é”™ï¼š\u0026#39;reset(Foo\u0026lt;java.lang.Integer\u0026gt;, java.lang.Integer)\u0026#39; in \u0026#39;Main\u0026#39; cannot be applied to \u0026#39;(Foo\u0026lt;java.lang.Number\u0026gt;, java.lang.Integer)\u0026#39; } static void reset(Foo\u0026lt;Integer\u0026gt; f,Integer i){ f.setBar(i); } } class Foo\u0026lt;T\u0026gt;{ private T bar; public Foo(T bar) { this.bar = bar; } public T getBar() { return bar; } public void setBar(T bar) { this.bar = bar; } } æ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä½¿ç”¨\u0026lt;? super T\u0026gt;è¿™æ ·çš„é€šé…ç¬¦ï¼Œè®©â€œFooæˆä¸ºFooçš„å­ç±»â€ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 public class Main { public static void main(String[] args) { Foo\u0026lt;Integer\u0026gt; f1 = new Foo\u0026lt;Integer\u0026gt;(100); Foo\u0026lt;Number\u0026gt; f2 = new Foo\u0026lt;\u0026gt;(200); reset(f1,new Integer(1)); reset(f2,new Integer(1)); } static void reset(Foo\u0026lt;? super Integer\u0026gt; f,Integer i){ f.setBar(i); } } class Foo\u0026lt;T\u0026gt;{ private T bar; public Foo(T bar) { this.bar = bar; } public T getBar() { return bar; } public void setBar(T bar) { this.bar = bar; } } ä½†æ˜¯éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œresetä¸­ä¸èƒ½è°ƒç”¨getBarå‡½æ•°ï¼Œå› ä¸ºfçš„ç±»å‹æ˜¯ä¸æ˜ç¡®çš„ï¼Œæ˜¯Foo\u0026lt;? super Integer\u0026gt;ï¼Œå®ƒæ—¢å¯èƒ½æ˜¯çš„Fooï¼Œä¹Ÿå¯èƒ½æ˜¯Fooï¼Œç±»å‹è½¬æ¢ä¼šå‡ºç°å¼‚å¸¸ã€‚å¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 public class Main { public static void main(String[] args) { Foo\u0026lt;Integer\u0026gt; f1 = new Foo\u0026lt;Integer\u0026gt;(100); Foo\u0026lt;Number\u0026gt; f2 = new Foo\u0026lt;\u0026gt;(200); reset(f1,new Integer(1)); reset(f2,new Integer(1)); } static void reset(Foo\u0026lt;? super Integer\u0026gt; f,Integer i){ f.setBar(i); Integer bar = f.getBar(); //æŠ¥é”™ï¼šIncompatible types. Found: \u0026#39;capture\u0026lt;? super java.lang.Integer\u0026gt;\u0026#39;, required: \u0026#39;java.lang.Integer\u0026#39; } } class Foo\u0026lt;T\u0026gt;{ private T bar; public Foo(T bar) { this.bar = bar; } public T getBar() { return bar; } public void setBar(T bar) { this.bar = bar; } } æˆ‘æ‹¥æœ‰çˆ¶ç±»çš„èƒ½åŠ›å»ç»™æ”¹å˜ä¸œè¥¿ï¼Œä½†å¦‚æœæˆ‘è‡ªå·±æ‹¿ä¸€ä¸ªä¸œè¥¿ï¼Œæˆ‘ä¸çŸ¥é“ä»–çš„ç±»å‹æ˜¯ä»€ä¹ˆã€‚ ä½†æœ‰ä¸ªç‰¹æ®Šæƒ…å†µï¼Œå”¯ä¸€å¯ä»¥æ¥æ”¶getFirst()æ–¹æ³•è¿”å›å€¼çš„æ˜¯Objectç±»å‹ï¼Œå¦‚ä¸‹ï¼š\n1 Object bar = f.getBar(); kotlin é€†å˜ kotlinä¸­äº¦æ˜¯å¦‚æ­¤ï¼Œä¸åšè¿‡å¤šé˜è¿°ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 fun main() { val f1 = Foo\u0026lt;Int\u0026gt;(100) val f2 = Foo\u0026lt;Number\u0026gt;(200) reset(f1,1) reset(f2,1) //æŠ¥é”™ï¼šType mismatch: inferred type is Foo\u0026lt;Number\u0026gt; but Foo\u0026lt;Int\u0026gt; was expected } fun reset(f: Foo\u0026lt;Int\u0026gt;,i: Int){ f.bar = i } class Foo\u0026lt;T\u0026gt;(var bar: T) å¢åŠ inå…³é”®å­—ï¼Œè¿›è¡Œé€†å˜\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 fun main() { val f1 = Foo\u0026lt;Int\u0026gt;(100) val f2 = Foo\u0026lt;Number\u0026gt;(200) reset(f1,1) reset(f2,1) } fun reset(f: Foo\u0026lt;in Int\u0026gt;,i: Int){ f.bar = i } class Foo\u0026lt;T\u0026gt;(var bar: T) inä»å­—é¢æ„æ€ä¸Šæ¥ç†è§£å°±æ˜¯åªèƒ½ç»™äºˆï¼Œå¯ä»¥å†™ä¸å¯è¯»çš„æ„æ€ï¼Œå¯¹åº”outã€‚\nPECSåŸåˆ™ï¼šProducer Extends Consumer Superã€‚å³ï¼šå¦‚æœéœ€è¦è¿”å›Tï¼Œå®ƒæ˜¯ç”Ÿäº§è€…ï¼ˆProducerï¼‰ï¼Œè¦ä½¿ç”¨extendsé€šé…ç¬¦/outï¼›å¦‚æœéœ€è¦å†™å…¥Tï¼Œå®ƒæ˜¯æ¶ˆè´¹è€…ï¼ˆConsumerï¼‰ï¼Œè¦ä½¿ç”¨superé€šé…ç¬¦/inã€‚\nq1: javaä¸­ä¸ºä»€ä¹ˆFooå’ŒFooæ²¡æœ‰ç»§æ‰¿å…³ç³»ï¼ŸNumberä¸æ˜¯Integerçš„çˆ¶ç±»å—ï¼Ÿ\na1: åœ¨Javaä¸­ï¼ŒPairå’ŒPairä¹‹é—´æ²¡æœ‰ç»§æ‰¿å…³ç³»ã€‚è™½ç„¶Numberæ˜¯Integerçš„çˆ¶ç±»ï¼Œä½†æ˜¯æ³›å‹ä¸æ”¯æŒåå˜ï¼ˆcovarianceï¼‰æˆ–é€†å˜ï¼ˆcontravarianceï¼‰çš„ç±»å‹å‚æ•°ç»§æ‰¿ã€‚\n1 2 3 Foo\u0026lt;Number\u0026gt; numberFoo = new Foo\u0026lt;\u0026gt;(10); Foo\u0026lt;Integer\u0026gt; integerFoo = new Foo\u0026lt;\u0026gt;(20); numberFoo = integerFoo; // ç¼–è¯‘é”™è¯¯ åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå¦‚æœFooå’ŒFooä¹‹é—´å­˜åœ¨ç»§æ‰¿å…³ç³»ï¼Œé‚£ä¹ˆå°†integerFooèµ‹å€¼ç»™numberFooåº”è¯¥æ˜¯åˆæ³•çš„ã€‚ç„¶è€Œï¼ŒJavaä¸­çš„æ³›å‹æ˜¯ä¸å¯å˜çš„ï¼ˆinvariantï¼‰ï¼Œè¿™æ„å‘³ç€å³ä½¿Integeræ˜¯Numberçš„å­ç±»å‹ï¼ŒFooå’ŒFooä¹‹é—´æ²¡æœ‰ç»§æ‰¿å…³ç³»ï¼Œæ— æ³•è¿›è¡Œèµ‹å€¼ã€‚\n","permalink":"https://www.otifik.xyz/posts/tech/kotlin-generics/","summary":"æ³›å‹æ“¦é™¤æœºåˆ¶ï¼šç¼–è¯‘å™¨ä¼šå°†Tè¿™æ ·çš„æ³›å‹æ“¦é™¤æˆObjectï¼Œè™šæ‹Ÿæœºæœ¬èº«æ˜¯ä¸çŸ¥é“æ³›å‹çš„ã€‚Javaçš„æ³›å‹æ˜¯ç”±ç¼–è¯‘å™¨åœ¨ç¼–è¯‘æ—¶å®è¡Œçš„ï¼Œç¼–è¯‘å™¨å†…éƒ¨æ°¸è¿œæŠŠæ‰€æœ‰ç±»å‹Tè§†ä¸ºObjectå¤„ç†ï¼Œä½†æ˜¯ï¼Œåœ¨éœ€è¦è½¬å‹çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨ä¼šæ ¹æ®Tçš„ç±»å‹è‡ªåŠ¨ä¸ºæˆ‘ä»¬å®è¡Œå®‰å…¨åœ°å¼ºåˆ¶è½¬å‹ã€‚\nç¼–è¯‘å™¨çœ‹åˆ°çš„ä»£ç ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 public class Foo\u0026lt;T\u0026gt;{ private T bar; public Foo(T bar) { this.bar = bar; } public T getBar() { return bar; } public void setBar(T bar) { this.bar = bar; } } è™šæ‹Ÿæœºçœ‹åˆ°çš„ä»£ç ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 public class Foo{ private Object bar; public Foo(Object bar) { this.","title":"Kotlinåå°„\u0026æ³›å‹"},{"content":"Kotilnçš„å§”æ‰˜ï¼Œç®€è€Œè¨€ä¹‹ï¼Œå°±æ˜¯æŠŠè®©æˆ‘å¹²çš„äº‹äº¤ç»™åˆ«äººåšã€‚åˆ†ä¸ºç±»å§”æ‰˜å’Œå±æ€§å§”æ‰˜ã€‚ ç”¨äºè§£è€¦ä»£ç ã€‚\nå¼•ç”¨æ–‡ç« ï¼š https://blog.csdn.net/willway_wang/article/details/120795321 https://www.kotlincn.net/docs/reference/delegated-properties.html\nç±»å§”æ‰˜ å°†æ¥å£çš„å®ç°å§”æ‰˜ç»™å¦ä¸€ä¸ªå¯¹è±¡ ä½†å€¼å¾—æ³¨æ„çš„æ˜¯ç±»å¿…é¡»å®ç°ä¸€ä¸ªæ¥å£ï¼Œå§”æ‰˜ç±»å¿…é¡»æ˜¯ç±»æ‰€å®ç°æ¥å£çš„å­ç±»å‹ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 interface Base { fun print() } class BaseImpl(val x: Int) : Base { override fun print() { print(x) } } class Derived(b: Base) : Base by b fun main() { val b = BaseImpl(10) Derived(b).print() } kotlinè½¬javaå­—èŠ‚ç è§£æï¼š byå…³é”®å­—è‡ªåŠ¨ç”Ÿæˆäº†Derivedçš„printï¼Œç›¸å½“äºDerivedè®©Baseçš„ä¸€ä¸ªå®ç°ç±»å¸®å®ƒè°ƒç”¨äº†printå‡½æ•°ã€‚ å§”æ‰˜ç±»çš„æ¥å£å®ç°å¯ä»¥é€šè¿‡overrideè¦†å†™ï¼Œå¦‚ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 interface Base { fun print() } class BaseImpl(val x: Int) : Base { override fun print() { print(x) } } class Derived(b: Base) : Base by b { override fun print() { print(\u0026#34;fun has override\u0026#34;) } } fun main() { val b = BaseImpl(10) Derived(b).print() } kotlinè½¬javaå­—èŠ‚ç è§£æï¼š Derivedè¦†å†™äº†Baseå®ç°ç±»çš„print å±æ€§å§”æ‰˜ å°†å±æ€§è®¿é—®å™¨çš„å®ç°å§”æ‰˜ç»™å¦ä¸€ä¸ªå¯¹è±¡\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 class Example { var p: String by Delegate() } class Delegate : ReadWriteProperty\u0026lt;Any, String\u0026gt; { override fun getValue(thisRef: Any, property: KProperty\u0026lt;*\u0026gt;): String { return \u0026#34;$thisRef, thank you for delegating \u0026#39;${property.name}\u0026#39; to me!\u0026#34; } override fun setValue(thisRef: Any, property: KProperty\u0026lt;*\u0026gt;, value: String) { println(\u0026#34;$value has been assigned to \u0026#39;${property.name}\u0026#39; in $thisRef.\u0026#34;) } } fun main() { val e = Example() println(e.p) } è§£æï¼š åŸç†å’Œç±»å§”æ‰˜å¤§è‡´ç±»ä¼¼\nâ‘ \n1 2 3 class Example { var p: String by Delegate() } å…¶ä¸­è¿™æ®µä»£ç å¯ä»¥ç­‰ä»·ä¸ºï¼š\n1 2 3 4 5 6 class Example { private val delegate = Delegate() var p: String set(value: String) = delegate.setValue(this, ..., value) get() = delegate.getValue(this, ...) } å¯ä»¥çœ‹åˆ°å…¶å®pè¿™ä¸ªå±æ€§çš„get/setäº¤ç»™äº†delegateæ¥è¿›è¡Œç»´æŠ¤ byå…³é”®å­—çš„ä½œç”¨æ˜¯å¯¹å®ƒåé¢çš„è¡¨è¾¾å¼æ±‚å€¼ï¼ˆæ¯”æ–¹è¯´lazyå‡½æ•°ï¼‰æ¥è·å–è¿™ä¸ªå¯¹è±¡ï¼Œåœ¨è¿™é‡Œå°±æ˜¯è·å–åˆ°äº†Delegateå¯¹è±¡ã€‚ ç¼–è¯‘å™¨ä¼šåˆ›å»ºä¸€ä¸ªéšè—çš„è¾…åŠ©å±æ€§ï¼Œå¹¶ä½¿ç”¨å§”æ‰˜å¯¹è±¡çš„å®ä¾‹å¯¹å®ƒè¿›è¡Œåˆå§‹åŒ–ï¼Œåœ¨è¿™é‡Œå°±æ˜¯æŠŠDelegateå¯¹è±¡èµ‹å€¼ç»™äº†delegateå±æ€§ã€‚\nkotlinè½¬javaå­—èŠ‚ç è§£æ\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 public final class Example { // $FF: synthetic field static final KProperty[] $$delegatedProperties = new KProperty[]{(KProperty)Reflection.mutableProperty1(new MutablePropertyReference1Impl(Example.class, \u0026#34;p\u0026#34;, \u0026#34;getP()Ljava/lang/String;\u0026#34;, 0))}; @NotNull private final Delegate p$delegate = new Delegate(); @NotNull public final String getP() { return this.p$delegate.getValue(this, $$delegatedProperties[0]); } public final void setP(@NotNull String var1) { Intrinsics.checkNotNullParameter(var1, \u0026#34;\u0026lt;set-?\u0026gt;\u0026#34;); this.p$delegate.setValue(this, $$delegatedProperties[0], (String)var1); } } public final class Delegate implements ReadWriteProperty { @NotNull public String getValue(@NotNull Object thisRef, @NotNull KProperty property) { Intrinsics.checkNotNullParameter(thisRef, \u0026#34;thisRef\u0026#34;); Intrinsics.checkNotNullParameter(property, \u0026#34;property\u0026#34;); return thisRef + \u0026#34;, thank you for delegating \u0026#39;\u0026#34; + property.getName() + \u0026#34;\u0026#39; to me!\u0026#34;; } // $FF: synthetic method // $FF: bridge method public Object getValue(Object var1, KProperty var2) { return this.getValue(var1, var2); } public void setValue(@NotNull Object thisRef, @NotNull KProperty property, @NotNull String value) { Intrinsics.checkNotNullParameter(thisRef, \u0026#34;thisRef\u0026#34;); Intrinsics.checkNotNullParameter(property, \u0026#34;property\u0026#34;); Intrinsics.checkNotNullParameter(value, \u0026#34;value\u0026#34;); String var4 = value + \u0026#34; has been assigned to \u0026#39;\u0026#34; + property.getName() + \u0026#34;\u0026#39; in \u0026#34; + thisRef + \u0026#39;.\u0026#39;; System.out.println(var4); } // $FF: synthetic method // $FF: bridge method public void setValue(Object var1, KProperty var2, Object var3) { this.setValue(var1, var2, (String)var3); } } public final class AKt { public static final void main() { Example e = new Example(); String var1 = e.getP(); System.out.println(var1); } // $FF: synthetic method public static void main(String[] var0) { main(); } } å…¶ä¸­thisRefä»£è¡¨å‘èµ·å§”æ‰˜çš„å¯¹è±¡ï¼Œ$$delegatedPropertieså¯¹è±¡ï¼Œå®ƒæ˜¯ä¸€ä¸ªKPropertyç±»å‹çš„æ•°ç»„ï¼Œå®ƒçš„å…ƒç´ å°è£…äº†ç±»ï¼Œå±æ€§åï¼Œgetteræ–¹æ³•ç­¾åç­‰ä¿¡æ¯ï¼Œä¹Ÿä¼šä¼ é€’ç»™å§”æ‰˜ç±»ï¼›KProperty ä¸»è¦æ˜¯ç”¨æ¥å°è£…å±æ€§çš„å…ƒä¿¡æ¯ï¼Œæä¾›ç»™å§”æ‰˜ç±»ä½¿ç”¨ï¼Œæ¯”å¦‚åœ¨å§”æ‰˜ç±»çš„ setValue æ–¹æ³•ä¸­é€šçŸ¥å±æ€§å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå°±ä¼šç”¨åˆ° KProperty é‡Œçš„å±æ€§åä¿¡æ¯äº†ã€‚\nâ‘¡\n1 2 3 4 5 6 7 8 9 class Delegate { operator fun getValue(thisRef: Any?, property: KProperty\u0026lt;*\u0026gt;): String { return \u0026#34;$thisRef, thank you for delegating \u0026#39;${property.name}\u0026#39; to me!\u0026#34; } operator fun setValue(thisRef: Any?, property: KProperty\u0026lt;*\u0026gt;, value: String) { println(\u0026#34;$value has been assigned to \u0026#39;${property.name}\u0026#39; in $thisRef.\u0026#34;) } } å§”æ‰˜ç±»å¿…é¡»å…·æœ‰getValueå’ŒsetValueæ–¹æ³•ï¼ˆå¦‚æœæ˜¯å¯å˜å±æ€§çš„è¯ï¼‰,å®šä¹‰åœ¨ReadWritePropertyæ¥å£é‡Œ ReadOnlyPropertyå¯¹åº”valï¼ŒReadWritePropertyå¯¹åº”var\n1 2 3 4 5 6 7 8 public fun interface ReadOnlyProperty\u0026lt;in T, out V\u0026gt; { public operator fun getValue(thisRef: T, property: KProperty\u0026lt;*\u0026gt;): V } public interface ReadWriteProperty\u0026lt;in T, V\u0026gt; : ReadOnlyProperty\u0026lt;T, V\u0026gt; { public override operator fun getValue(thisRef: T, property: KProperty\u0026lt;*\u0026gt;): V public operator fun setValue(thisRef: T, property: KProperty\u0026lt;*\u0026gt;, value: V) } è™½ç„¶ Kotlin æä¾›äº† ReadWriteProperty å’Œ ReadOnlyProperty å°è£…äº†çº¦å®šçš„æ–¹æ³•ç»™æˆ‘ä»¬ä½¿ç”¨ï¼Œä½†æ˜¯å½“æˆ‘ä»¬å®šä¹‰å§”æ‰˜ç±»æ—¶å¹¶ä¸æ˜¯ä¸€å®šè¦å®ç° Kotlin æä¾›çš„æ¥å£ã€‚\nå®é™…ä¸Šï¼Œåªè¦ä¿æŒå§”æ‰˜ç±»é‡Œçš„ setValue å’Œ getValue æ–¹æ³•ä¸çº¦å®šçš„ setValue æ–¹æ³•å’Œ getValue æ–¹æ³•ä¸€è‡´å°±å¯ä»¥äº†ã€‚ å¦‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 import kotlin.reflect.KProperty import kotlin.reflect.full.valueParameters class Example { var p: String by Delegate() } class Delegate { operator fun getValue(thisRef: Any?, property: KProperty\u0026lt;*\u0026gt;): String { return \u0026#34;$thisRef, thank you for delegating \u0026#39;${property.name}\u0026#39; to me!\u0026#34; } operator fun setValue(thisRef: Any?, property: KProperty\u0026lt;*\u0026gt;, value: String) { println(\u0026#34;$value has been assigned to \u0026#39;${property.name}\u0026#39; in $thisRef.\u0026#34;) } } fun main(){ val e = Example() println(e.p) } kotlinå†…ç½®å§”æ‰˜å±æ€§ lazy lazy()æ˜¯æ¥å—ä¸€ä¸ªlambdaå¹¶è¿”å›ä¸€ä¸ªLazyå®ä¾‹çš„å‡½æ•°ï¼Œè¿”å›çš„å®ä¾‹å¯ä»¥ä½œä¸ºå®ç°å»¶è¿Ÿå±æ€§çš„å§”æ‰˜ï¼šç¬¬ä¸€æ¬¡è°ƒç”¨get()ä¼šæ‰§è¡Œå·²ä¼ é€’ç»™lazy()çš„lambdaè¡¨è¾¾å¼å¹¶è®°å½•ç»“æœï¼Œåç»­è°ƒç”¨get()åªæ˜¯è¿”å›è®°å½•çš„ç»“æœã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 public actual fun \u0026lt;T\u0026gt; lazy(initializer: () -\u0026gt; T): Lazy\u0026lt;T\u0026gt; = SynchronizedLazyImpl(initializer) public interface Lazy\u0026lt;out T\u0026gt; { /** * Gets the lazily initialized value of the current Lazy instance. * Once the value was initialized it must not change during the rest of lifetime of this Lazy instance. */ public val value: T /** * Returns `true` if a value for this Lazy instance has been already initialized, and `false` otherwise. * Once this function has returned `true` it stays `true` for the rest of lifetime of this Lazy instance. */ public fun isInitialized(): Boolean } public inline operator fun \u0026lt;T\u0026gt; Lazy\u0026lt;T\u0026gt;.getValue(thisRef: Any?, property: KProperty\u0026lt;*\u0026gt;): T = value private class SynchronizedLazyImpl\u0026lt;out T\u0026gt;(initializer: () -\u0026gt; T, lock: Any? = null) : Lazy\u0026lt;T\u0026gt;, Serializable { private var initializer: (() -\u0026gt; T)? = initializer @Volatile private var _value: Any? = UNINITIALIZED_VALUE // final field is required to enable safe publication of constructed instance private val lock = lock ?: this override val value: T get() { val _v1 = _value if (_v1 !== UNINITIALIZED_VALUE) { @Suppress(\u0026#34;UNCHECKED_CAST\u0026#34;) return _v1 as T } return synchronized(lock) { val _v2 = _value if (_v2 !== UNINITIALIZED_VALUE) { @Suppress(\u0026#34;UNCHECKED_CAST\u0026#34;) (_v2 as T) } else { val typedValue = initializer!!() _value = typedValue initializer = null typedValue } } } override fun isInitialized(): Boolean = _value !== UNINITIALIZED_VALUE override fun toString(): String = if (isInitialized()) value.toString() else \u0026#34;Lazy value not initialized yet.\u0026#34; private fun writeReplace(): Any = InitializedLazyImpl(value) } é€šè¿‡æºç å¯ä»¥çœ‹å‡ºï¼ŒLazy.ktä¸­å®šä¹‰äº†ç¬¦åˆçº¦å®šçš„æ‰©å±•å‡½æ•°getValueï¼Œå®ä¾‹åŒ–SynchronizedLazyImplå°±æ˜¯å§”æ‰˜å¯¹è±¡ã€‚\nå¯è§‚å¯Ÿå±æ€§ Observable Delegates.observable() æ¥å—ä¸¤ä¸ªå‚æ•°ï¼šåˆå§‹å€¼ä¸ä¿®æ”¹æ—¶å¤„ç†ç¨‹åºï¼ˆhandlerï¼‰ã€‚ æ¯å½“æˆ‘ä»¬ç»™å±æ€§èµ‹å€¼æ—¶ä¼šè°ƒç”¨è¯¥å¤„ç†ç¨‹åºï¼ˆåœ¨èµ‹å€¼åæ‰§è¡Œï¼‰ã€‚å®ƒæœ‰ä¸‰ä¸ªå‚æ•°ï¼šè¢«èµ‹å€¼çš„å±æ€§ã€æ—§å€¼ä¸æ–°å€¼ï¼š\n1 2 3 4 var name: String by Delegates.observable(\u0026#34;no name\u0026#34;) { prop, old, new -\u0026gt; println(\u0026#34;$old -\u0026gt; $new\u0026#34;) } æºç \n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 public inline fun \u0026lt;T\u0026gt; observable(initialValue: T, crossinline onChange: (property: KProperty\u0026lt;*\u0026gt;, oldValue: T, newValue: T) -\u0026gt; Unit): ReadWriteProperty\u0026lt;Any?, T\u0026gt; = object : ObservableProperty\u0026lt;T\u0026gt;(initialValue) { override fun afterChange(property: KProperty\u0026lt;*\u0026gt;, oldValue: T, newValue: T) = onChange(property, oldValue, newValue) } public abstract class ObservableProperty\u0026lt;V\u0026gt;(initialValue: V) : ReadWriteProperty\u0026lt;Any?, V\u0026gt; { private var value = initialValue /** * The callback which is called before a change to the property value is attempted. * The value of the property hasn\u0026#39;t been changed yet, when this callback is invoked. * If the callback returns `true` the value of the property is being set to the new value, * and if the callback returns `false` the new value is discarded and the property remains its old value. */ protected open fun beforeChange(property: KProperty\u0026lt;*\u0026gt;, oldValue: V, newValue: V): Boolean = true /** * The callback which is called after the change of the property is made. The value of the property * has already been changed when this callback is invoked. */ protected open fun afterChange(property: KProperty\u0026lt;*\u0026gt;, oldValue: V, newValue: V): Unit {} public override fun getValue(thisRef: Any?, property: KProperty\u0026lt;*\u0026gt;): V { return value } public override fun setValue(thisRef: Any?, property: KProperty\u0026lt;*\u0026gt;, value: V) { val oldValue = this.value if (!beforeChange(property, oldValue, value)) { return } this.value = value afterChange(property, oldValue, value) } } å§”æ‰˜ç»™å¦ä¸€ä¸ªå±æ€§ ä» Kotlin 1.4 å¼€å§‹ï¼Œä¸€ä¸ªå±æ€§å¯ä»¥æŠŠå®ƒçš„ getter ä¸ setter å§”æ‰˜ç»™å¦ä¸€ä¸ªå±æ€§ã€‚è¿™ç§å§”æ‰˜å¯¹äºé¡¶å±‚å’Œç±»çš„å±æ€§ï¼ˆæˆå‘˜å’Œæ‰©å±•ï¼‰éƒ½å¯ç”¨ã€‚è¯¥å§”æ‰˜å±æ€§å¯ä»¥ä¸ºï¼š\n-é¡¶å±‚å±æ€§ -åŒä¸€ä¸ªç±»çš„æˆå‘˜æˆ–æ‰©å±•å±æ€§ -å¦ä¸€ä¸ªç±»çš„æˆå‘˜æˆ–æ‰©å±•å±æ€§ ä¸ºå°†ä¸€ä¸ªå±æ€§å§”æ‰˜ç»™å¦ä¸€ä¸ªå±æ€§ï¼Œåº”åœ¨å§”æ‰˜åç§°ä¸­ä½¿ç”¨æ°å½“çš„::é™å®šç¬¦ï¼Œä¾‹å¦‚ï¼Œthis::delegateæˆ–MyClass::delegateã€‚\n1 2 3 4 5 6 7 8 9 10 var topLevelInt: Int = 0 class ClassWithDelegate(val anotherClassInt: Int) class MyClass(var memberInt: Int, val anotherClassInstance: ClassWithDelegate) { var delegatedToMember: Int by this::memberInt var delegatedToTopLevel: Int by ::topLevelInt val delegatedToAnotherClass: Int by anotherClassInstance::anotherClassInt } var MyClass.extDelegated: Int by ::topLevelInt ä½¿ç”¨åœºæ™¯ï¼šå½“æƒ³è¦ä»¥ä¸€ç§å‘åå…¼å®¹çš„æ–¹å¼é‡å‘½åä¸€ä¸ªå±æ€§çš„æ—¶å€™ï¼šå¼•å…¥ä¸€ä¸ªæ–°çš„å±æ€§ã€ ä½¿ç”¨ @Deprecated æ³¨è§£æ¥æ³¨è§£æ—§çš„å±æ€§ã€å¹¶å§”æ‰˜å…¶å®ç°ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 class MyClass { var newName: Int = 0 @Deprecated(\u0026#34;Use \u0026#39;newName\u0026#39; instead\u0026#34;, ReplaceWith(\u0026#34;newName\u0026#34;)) var oldName: Int by this::newName } fun main() { val myClass = MyClass() // é€šçŸ¥ï¼š\u0026#39;oldName: Int\u0026#39; is deprecated. // Use \u0026#39;newName\u0026#39; instead myClass.oldName = 42 println(myClass.newName) // 42 } å°†å±æ€§å‚¨å­˜åœ¨æ˜ å°„ä¸­ ä¸€ä¸ªå¸¸è§çš„ç”¨ä¾‹æ˜¯åœ¨ä¸€ä¸ªæ˜ å°„ï¼ˆmapï¼‰é‡Œå­˜å‚¨å±æ€§çš„å€¼ã€‚è¿™ç»å¸¸å‡ºç°åœ¨åƒè§£æJSONæˆ–è€…åšå…¶ä»–â€œåŠ¨æ€â€äº‹æƒ…çš„åº”ç”¨ä¸­ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ å¯ä»¥ä½¿ç”¨æ˜ å°„å®ä¾‹è‡ªèº«ä½œä¸ºå§”æ‰˜æ¥å®ç°å§”æ‰˜å±æ€§ã€‚\n1 2 3 4 class User(val map: Map\u0026lt;String, Any?\u0026gt;) { val name: String by map val age: Int by map } åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæ„é€ å‡½æ•°æ¥å—ä¸€ä¸ªæ˜ å°„å‚æ•°ï¼š\n1 2 3 4 val user = User(mapOf( \u0026#34;name\u0026#34; to \u0026#34;John Doe\u0026#34;, \u0026#34;age\u0026#34; to 25 )) å§”æ‰˜å±æ€§ä¼šä»è¿™ä¸ªæ˜ å°„ä¸­å–å€¼ï¼ˆé€šè¿‡å­—ç¬¦ä¸²é”®â€”â€”å±æ€§çš„åç§°ï¼‰ï¼š\n1 2 println(user.name) // Prints \u0026#34;John Doe\u0026#34; println(user.age) // Prints 25 è¿™ä¹Ÿé€‚ç”¨äº var å±æ€§ï¼Œå¦‚æœæŠŠåªè¯»çš„ Map æ¢æˆ MutableMap çš„è¯ï¼š\n1 2 3 4 class MutableUser(val map: MutableMap\u0026lt;String, Any?\u0026gt;) { var name: String by map var age: Int by map } å±€éƒ¨å§”æ‰˜å±æ€§ ä½ å¯ä»¥å°†å±€éƒ¨å˜é‡å£°æ˜ä¸ºå§”æ‰˜å±æ€§ã€‚ ä¾‹å¦‚ï¼Œä½ å¯ä»¥ä½¿ä¸€ä¸ªå±€éƒ¨å˜é‡æƒ°æ€§åˆå§‹åŒ–ï¼š\n1 2 3 4 5 6 7 fun example(computeFoo: () -\u0026gt; Foo) { val memoizedFoo by lazy(computeFoo) â€‹ if (someCondition \u0026amp;\u0026amp; memoizedFoo.isValid()) { memoizedFoo.doSomething() } } memoizedFoo å˜é‡åªä¼šåœ¨ç¬¬ä¸€æ¬¡è®¿é—®æ—¶è®¡ç®—ã€‚ å¦‚æœ someCondition å¤±è´¥ï¼Œé‚£ä¹ˆè¯¥å˜é‡æ ¹æœ¬ä¸ä¼šè®¡ç®—ã€‚\næä¾›å§”æ‰˜ é€šè¿‡å®šä¹‰ provideDelegate æ“ä½œç¬¦ï¼Œå¯ä»¥æ‰©å±•åˆ›å»ºå±æ€§å®ç°æ‰€å§”æ‰˜å¯¹è±¡çš„é€»è¾‘ã€‚ å¦‚æœ by å³ä¾§æ‰€ä½¿ç”¨çš„å¯¹è±¡å°† provideDelegate å®šä¹‰ä¸ºæˆå‘˜æˆ–æ‰©å±•å‡½æ•°ï¼Œé‚£ä¹ˆä¼šè°ƒç”¨è¯¥å‡½æ•°æ¥ åˆ›å»ºå±æ€§å§”æ‰˜å®ä¾‹ã€‚\nprovideDelegate çš„ä¸€ä¸ªå¯èƒ½çš„ä½¿ç”¨åœºæ™¯æ˜¯åœ¨åˆ›å»ºå±æ€§æ—¶ï¼ˆè€Œä¸ä»…åœ¨å…¶ getter æˆ– setter ä¸­ï¼‰æ£€æŸ¥å±æ€§ä¸€è‡´æ€§ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 class ResourceDelegate\u0026lt;T\u0026gt; : ReadOnlyProperty\u0026lt;MyUI, T\u0026gt; { override fun getValue(thisRef: MyUI, property: KProperty\u0026lt;*\u0026gt;): T { ... } } class ResourceLoader\u0026lt;T\u0026gt;(id: ResourceID\u0026lt;T\u0026gt;) { operator fun provideDelegate( thisRef: MyUI, prop: KProperty\u0026lt;*\u0026gt; ): ReadOnlyProperty\u0026lt;MyUI, T\u0026gt; { checkProperty(thisRef, prop.name) // åˆ›å»ºå§”æ‰˜ return ResourceDelegate() } private fun checkProperty(thisRef: MyUI, name: String) { â€¦â€¦ } } class MyUI { fun \u0026lt;T\u0026gt; bindResource(id: ResourceID\u0026lt;T\u0026gt;): ResourceLoader\u0026lt;T\u0026gt; { â€¦â€¦ } val image by bindResource(ResourceID.image_id) val text by bindResource(ResourceID.text_id) } prop.nameï¼Œæ­¤å¤„propæŒ‡çš„æ˜¯è¢«å§”æ‰˜å±æ€§å¯¹è±¡ï¼Œå› æ­¤prop.nameå°±æ˜¯å±æ€§çš„åç§°ï¼Œåœ¨ checkProperty(thisRef, prop.name)ä¸­å³å¯è‡ªè¡Œæ£€æŸ¥å±æ€§ä¸€è‡´æ€§ï¼Œæ£€æŸ¥æ— è¯¯åï¼Œå³å¯é€šè¿‡è¿”å›çš„getValueå®Œæˆå±æ€§å§”æ‰˜\n","permalink":"https://www.otifik.xyz/posts/tech/kotlin-delegate/","summary":"Kotilnçš„å§”æ‰˜ï¼Œç®€è€Œè¨€ä¹‹ï¼Œå°±æ˜¯æŠŠè®©æˆ‘å¹²çš„äº‹äº¤ç»™åˆ«äººåšã€‚åˆ†ä¸ºç±»å§”æ‰˜å’Œå±æ€§å§”æ‰˜ã€‚ ç”¨äºè§£è€¦ä»£ç ã€‚\nå¼•ç”¨æ–‡ç« ï¼š https://blog.csdn.net/willway_wang/article/details/120795321 https://www.kotlincn.net/docs/reference/delegated-properties.html\nç±»å§”æ‰˜ å°†æ¥å£çš„å®ç°å§”æ‰˜ç»™å¦ä¸€ä¸ªå¯¹è±¡ ä½†å€¼å¾—æ³¨æ„çš„æ˜¯ç±»å¿…é¡»å®ç°ä¸€ä¸ªæ¥å£ï¼Œå§”æ‰˜ç±»å¿…é¡»æ˜¯ç±»æ‰€å®ç°æ¥å£çš„å­ç±»å‹ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 interface Base { fun print() } class BaseImpl(val x: Int) : Base { override fun print() { print(x) } } class Derived(b: Base) : Base by b fun main() { val b = BaseImpl(10) Derived(b).print() } kotlinè½¬javaå­—èŠ‚ç è§£æï¼š byå…³é”®å­—è‡ªåŠ¨ç”Ÿæˆäº†Derivedçš„printï¼Œç›¸å½“äºDerivedè®©Baseçš„ä¸€ä¸ªå®ç°ç±»å¸®å®ƒè°ƒç”¨äº†printå‡½æ•°ã€‚ å§”æ‰˜ç±»çš„æ¥å£å®ç°å¯ä»¥é€šè¿‡overrideè¦†å†™ï¼Œå¦‚ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 interface Base { fun print() } class BaseImpl(val x: Int) : Base { override fun print() { print(x) } } class Derived(b: Base) : Base by b { override fun print() { print(\u0026#34;fun has override\u0026#34;) } } fun main() { val b = BaseImpl(10) Derived(b).","title":"Kotlinå§”æ‰˜æ·±ç©¶"},{"content":"iPadæ–‡ä»¶ä¼ è¾“åˆ°windows å¤„äºåŒä¸€wifiä¸‹çš„iPadä¸windowsæ–‡ä»¶ä¼ è¾“ï¼ŒåŠ¡å¿…é˜…è¯»å®Œå†è¿›è¡Œæ“ä½œï¼Œäº²æµ‹13gè§†é¢‘èŠ±äº†å¤§æ¦‚ååˆ†é’Ÿä¸åˆ°\nå‡†å¤‡å·¥ä½œï¼šæ‰“å¼€SMB æ§åˆ¶é¢æ¿-ç¨‹åº-å¯ç”¨æˆ–å…³é—­windowsåŠŸèƒ½\nç¡®å®šåé‡å¯ç”µè„‘\nåˆ›å»ºå…±äº«æ–‡ä»¶å¤¹ ä»»æ„ä½ç½®æ–°å»ºæ–‡ä»¶å¤¹ï¼Œå³é”®å±æ€§-å…±äº«\nç‚¹å‡»å…±äº«\né€‰æ‹©è‡ªå·±çš„è´¦å·å¹¶æ·»åŠ ï¼Œç„¶åç‚¹å‡»å…±äº«ï¼ˆä¸€èˆ¬éƒ½é»˜è®¤ä¼šæœ‰è‡ªå·±çš„è´¦å·ï¼Œæ²¡æœ‰çš„æƒ…å†µè¯·è‡ªè¡Œåˆ›å»ºä¸€ä¸ªæœ¬åœ°è´¦å·ï¼‰\niPadè¿æ¥ ç„¶åiPadä¸Šæ‰“å¼€æ–‡ä»¶ï¼Œç‚¹å‡»ä¸‰ä¸ªç‚¹å›¾æ ‡-è¿æ¥æœåŠ¡å™¨\nè¾“å…¥smb://+ç”µè„‘ç«¯çš„ipåœ°å€ï¼ˆcmdé€šè¿‡ipconfigè·å–ï¼Œä¸å¤šèµ˜è¿°ï¼‰\né€‰æ‹©æ³¨å†Œç”¨æˆ·ï¼Œè¾“å…¥windowsç”¨æˆ·åå’Œå¯†ç \nç”¨æˆ·å°±æ˜¯C:/Usersä¸‹çš„ç”¨æˆ·ï¼Œå¯†ç å°±æ˜¯pin\nä¸Šä¼ æ–‡ä»¶è‡³å…±äº«æ–‡ä»¶å¤¹ ç‚¹å‡»åˆ†äº«-å­˜å‚¨åˆ°æ–‡ä»¶ï¼Œç„¶åç›´æ¥ç‚¹å…±äº«æ–‡ä»¶å¤¹å­˜è¿›å»å°±å¥½å•¦\n","permalink":"https://www.otifik.xyz/posts/tech/ipadtowindows/","summary":"iPadæ–‡ä»¶ä¼ è¾“åˆ°windows å¤„äºåŒä¸€wifiä¸‹çš„iPadä¸windowsæ–‡ä»¶ä¼ è¾“ï¼ŒåŠ¡å¿…é˜…è¯»å®Œå†è¿›è¡Œæ“ä½œï¼Œäº²æµ‹13gè§†é¢‘èŠ±äº†å¤§æ¦‚ååˆ†é’Ÿä¸åˆ°\nå‡†å¤‡å·¥ä½œï¼šæ‰“å¼€SMB æ§åˆ¶é¢æ¿-ç¨‹åº-å¯ç”¨æˆ–å…³é—­windowsåŠŸèƒ½\nç¡®å®šåé‡å¯ç”µè„‘\nåˆ›å»ºå…±äº«æ–‡ä»¶å¤¹ ä»»æ„ä½ç½®æ–°å»ºæ–‡ä»¶å¤¹ï¼Œå³é”®å±æ€§-å…±äº«\nç‚¹å‡»å…±äº«\né€‰æ‹©è‡ªå·±çš„è´¦å·å¹¶æ·»åŠ ï¼Œç„¶åç‚¹å‡»å…±äº«ï¼ˆä¸€èˆ¬éƒ½é»˜è®¤ä¼šæœ‰è‡ªå·±çš„è´¦å·ï¼Œæ²¡æœ‰çš„æƒ…å†µè¯·è‡ªè¡Œåˆ›å»ºä¸€ä¸ªæœ¬åœ°è´¦å·ï¼‰\niPadè¿æ¥ ç„¶åiPadä¸Šæ‰“å¼€æ–‡ä»¶ï¼Œç‚¹å‡»ä¸‰ä¸ªç‚¹å›¾æ ‡-è¿æ¥æœåŠ¡å™¨\nè¾“å…¥smb://+ç”µè„‘ç«¯çš„ipåœ°å€ï¼ˆcmdé€šè¿‡ipconfigè·å–ï¼Œä¸å¤šèµ˜è¿°ï¼‰\né€‰æ‹©æ³¨å†Œç”¨æˆ·ï¼Œè¾“å…¥windowsç”¨æˆ·åå’Œå¯†ç \nç”¨æˆ·å°±æ˜¯C:/Usersä¸‹çš„ç”¨æˆ·ï¼Œå¯†ç å°±æ˜¯pin\nä¸Šä¼ æ–‡ä»¶è‡³å…±äº«æ–‡ä»¶å¤¹ ç‚¹å‡»åˆ†äº«-å­˜å‚¨åˆ°æ–‡ä»¶ï¼Œç„¶åç›´æ¥ç‚¹å…±äº«æ–‡ä»¶å¤¹å­˜è¿›å»å°±å¥½å•¦","title":"iPadæ–‡ä»¶ä¼ è¾“åˆ°windows"},{"content":"Scoop windowsåŒ…ç®¡ç†å™¨\nå®‰è£… ç®¡ç†å‘˜æ¨¡å¼æ‰“å¼€PowerShellï¼Œè®¾ç½®ç”¨æˆ·å®‰è£…è·¯å¾„å’Œå…¨å±€å®‰è£…è·¯å¾„ï¼Œ\n1 2 3 4 $env:SCOOP=\u0026#39;D:\\Scoop\u0026#39; [Environment]::SetEnvironmentVariable(\u0026#39;SCOOP\u0026#39;, $env:SCOOP, \u0026#39;User\u0026#39;) $env:SCOOP_GLOBAL=\u0026#39;D:\\ScoopGlobal\u0026#39; [Environment]::SetEnvironmentVariable(\u0026#39;SCOOP_GLOBAL\u0026#39;, $env:SCOOP_GLOBAL, \u0026#39;Machine\u0026#39;) è®¾ç½®PowerShellæ‰§è¡Œç­–ç•¥ä¸ºRemoteSigned\n1 Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser å®‰è£…Scoop\n1 iwr -useb get.scoop.sh | iex Scoopä¸­å®‰è£…git\n1 scoop install git æœ€å¥½æ‰“å¼€gitåˆå§‹åŒ–ä¸€ä¸‹ï¼Œå¦åˆ™ä¼šå‡ºç°timeoutç­‰æƒ…å†µ\nä½¿ç”¨ æ·»åŠ bucket 1 scoop bucket add \u0026lt;bucketname\u0026gt; å®‰è£…è½¯ä»¶ 1 scoop install \u0026lt;app\u0026gt; ç®¡ç†è½¯ä»¶ç¼“å­˜ 1 2 3 scoop cache show #æ˜¾ç¤ºå®‰è£…åŒ…ç¼“å­˜ scoop cache rm \u0026lt;app\u0026gt; #åˆ é™¤æŒ‡å®šåº”ç”¨çš„å®‰è£…åŒ…ç¼“å­˜ scoop cache rm * #åˆ é™¤æ‰€æœ‰çš„å®‰è£…åŒ…ç¼“å­˜ å…¨å±€å®‰è£…è½¯ä»¶ 1 scoop install -g \u0026lt;app\u0026gt; Aria2å¤šçº¿ç¨‹ä¸‹è½½ 1 scoop install aria2 é…ç½®ç›¸å…³è®¾ç½®\n1 2 3 scoop config aria2-split 32#å•ä»»åŠ¡æœ€å¤§è¿æ¥æ•°è®¾ç½®ä¸º32 scoop config aria2-max-connection-per-server 16#å•æœåŠ¡å™¨æœ€å¤§è¿æ¥æ•°è®¾ç½®ä¸º16 scoop config aria2-min-split-size 1M#æœ€å°æ–‡ä»¶åˆ†ç‰‡å¤§å°è®¾ç½®ä¸º1M å¸¸ç”¨å‘½ä»¤ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 # æ›´æ–° scoop åŠè½¯ä»¶åŒ…åˆ—è¡¨ scoop update ## å®‰è£…è½¯ä»¶ ## # éå…¨å±€å®‰è£…ï¼ˆå¹¶ç¦æ­¢å®‰è£…åŒ…ç¼“å­˜ï¼‰ scoop install -k \u0026lt;app\u0026gt; # å…¨å±€å®‰è£…ï¼ˆå¹¶ç¦æ­¢å®‰è£…åŒ…ç¼“å­˜ï¼‰ sudo scoop install -gk \u0026lt;app\u0026gt; ## å¸è½½è½¯ä»¶ ## # å¸è½½éå…¨å±€è½¯ä»¶ï¼ˆå¹¶åˆ é™¤é…ç½®æ–‡ä»¶ï¼‰ scoop uninstall -p \u0026lt;app\u0026gt; # å¸è½½å…¨å±€è½¯ä»¶ï¼ˆå¹¶åˆ é™¤é…ç½®æ–‡ä»¶ï¼‰ sudo scoop uninstall -gp \u0026lt;app\u0026gt; ## æ›´æ–°è½¯ä»¶ ## # æ›´æ–°æ‰€æœ‰éå…¨å±€è½¯ä»¶ï¼ˆå¹¶ç¦æ­¢å®‰è£…åŒ…ç¼“å­˜ï¼‰ scoop update -k * # æ›´æ–°æ‰€æœ‰è½¯ä»¶ï¼ˆå¹¶ç¦æ­¢å®‰è£…åŒ…ç¼“å­˜ï¼‰ sudo scoop update -gk * ## åƒåœ¾æ¸…ç† ## # åˆ é™¤æ‰€æœ‰æ—§ç‰ˆæœ¬éå…¨å±€è½¯ä»¶ï¼ˆå¹¶åˆ é™¤è½¯ä»¶åŒ…ç¼“å­˜ï¼‰ scoop cleanup -k * # åˆ é™¤æ‰€æœ‰æ—§ç‰ˆæœ¬è½¯ä»¶ï¼ˆå¹¶åˆ é™¤è½¯ä»¶åŒ…ç¼“å­˜ï¼‰ sudo scoop cleanup -gk * # æ¸…é™¤è½¯ä»¶åŒ…ç¼“å­˜ scoop cache rm * ","permalink":"https://www.otifik.xyz/posts/tech/scoop/","summary":"Scoop windowsåŒ…ç®¡ç†å™¨\nå®‰è£… ç®¡ç†å‘˜æ¨¡å¼æ‰“å¼€PowerShellï¼Œè®¾ç½®ç”¨æˆ·å®‰è£…è·¯å¾„å’Œå…¨å±€å®‰è£…è·¯å¾„ï¼Œ\n1 2 3 4 $env:SCOOP=\u0026#39;D:\\Scoop\u0026#39; [Environment]::SetEnvironmentVariable(\u0026#39;SCOOP\u0026#39;, $env:SCOOP, \u0026#39;User\u0026#39;) $env:SCOOP_GLOBAL=\u0026#39;D:\\ScoopGlobal\u0026#39; [Environment]::SetEnvironmentVariable(\u0026#39;SCOOP_GLOBAL\u0026#39;, $env:SCOOP_GLOBAL, \u0026#39;Machine\u0026#39;) è®¾ç½®PowerShellæ‰§è¡Œç­–ç•¥ä¸ºRemoteSigned\n1 Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser å®‰è£…Scoop\n1 iwr -useb get.scoop.sh | iex Scoopä¸­å®‰è£…git\n1 scoop install git æœ€å¥½æ‰“å¼€gitåˆå§‹åŒ–ä¸€ä¸‹ï¼Œå¦åˆ™ä¼šå‡ºç°timeoutç­‰æƒ…å†µ\nä½¿ç”¨ æ·»åŠ bucket 1 scoop bucket add \u0026lt;bucketname\u0026gt; å®‰è£…è½¯ä»¶ 1 scoop install \u0026lt;app\u0026gt; ç®¡ç†è½¯ä»¶ç¼“å­˜ 1 2 3 scoop cache show #æ˜¾ç¤ºå®‰è£…åŒ…ç¼“å­˜ scoop cache rm \u0026lt;app\u0026gt; #åˆ é™¤æŒ‡å®šåº”ç”¨çš„å®‰è£…åŒ…ç¼“å­˜ scoop cache rm * #åˆ é™¤æ‰€æœ‰çš„å®‰è£…åŒ…ç¼“å­˜ å…¨å±€å®‰è£…è½¯ä»¶ 1 scoop install -g \u0026lt;app\u0026gt; Aria2å¤šçº¿ç¨‹ä¸‹è½½ 1 scoop install aria2 é…ç½®ç›¸å…³è®¾ç½®","title":"Scoopçš„å®‰è£…ä½¿ç”¨"},{"content":"å¤šçš„å°±ä¸å¤šè¯´å•¦ï¼Œä¸‹é¢æ˜¯æˆ‘ä¸ªäººçš„ç»˜ç”»è®°å½•ï¼ˆæŒ‰æ—¶é—´æ’åºï¼‰\nç»˜ç”»è®°å½• 2014.1.30 2022.6.19 2022.6.22 2022.9.15 2022.9.22 2022.9.26 2022.11.6 2022.12.17 2023.1.11 ","permalink":"https://www.otifik.xyz/posts/painting/record/","summary":"å¤šçš„å°±ä¸å¤šè¯´å•¦ï¼Œä¸‹é¢æ˜¯æˆ‘ä¸ªäººçš„ç»˜ç”»è®°å½•ï¼ˆæŒ‰æ—¶é—´æ’åºï¼‰\nç»˜ç”»è®°å½• 2014.1.30 2022.6.19 2022.6.22 2022.9.15 2022.9.22 2022.9.26 2022.11.6 2022.12.17 2023.1.11 ","title":"ç»˜ç”»ç”Ÿæ¶¯è®°å½•"},{"content":"å¦‚ä½•ç”¨esp8266å¼€å‘æ¿æ§åˆ¶sg90è¿›è¡Œæ—‹è½¬ æ‰€éœ€å·¥å…· ç¡¬ä»¶å‡†å¤‡ï¼š\n1.esp8266 CH340å¼€å‘æ¿\n2.sg90èˆµæœº\n3.æœé‚¦çº¿è‹¥å¹²\n4.ä¸€æ ¹microusbæ•°æ®çº¿ï¼ˆä¸åŒusbæ•°æ®çº¿çš„åŒºåˆ«ï¼‰\nè¯·æ³¨æ„ä¸åŒusbæ•°æ®çº¿çš„åŒºåˆ«ï¼ï¼ï¼\nä¸€èˆ¬æœ‰ä¸¤ç§usbæ•°æ®çº¿ï¼Œä¸€ç§æ˜¯å……ç”µçº¿ï¼Œå¦ä¸€ç§æ˜¯æ•°æ®çº¿ã€‚\nå……ç”µçº¿å’Œæ•°æ®çº¿çš„åŒºåˆ«åœ¨äºå……ç”µçº¿æ— æ³•ä¼ è¾“æ•°æ®ï¼Œè€Œæ•°æ®çº¿å¯ä»¥ä¼ è¾“æ•°æ®ã€‚\nä¸€èˆ¬æ•°æ®çº¿å’Œå……ç”µçº¿éƒ½æ˜¯ç”¨USBæ¥å£çš„ï¼Œä¸€èˆ¬éƒ½ä¼šæœ‰å››æ ¹çº¿ã€‚å……ç”µçº¿ç”¨åˆ°çš„æ˜¯ç”µæºçš„VCCå’ŒGNDè¿™ä¸¤ä¸ªçº¿ï¼Œè€Œæ•°æ®çº¿æ˜¯ç”¨åˆ°VCCï¼ŒGNDï¼Œå’Œä¸¤æ ¹é€šä¿¡çº¿ã€‚æ•°æ®çº¿åœ¨USBæ¥å£é‚£è·Ÿçº¿é‡Œæœ‰å››æ¡çº¿ï¼Œè€Œç”µæºçº¿åœ¨USBé‚£ä¸ªçº¿é‡Œæœ‰ä¸¤æ¡çº¿ï¼Œæ‰€ä»¥ï¼Œæ•°æ®çº¿å¯ä»¥å½“ç”µæºçº¿ï¼Œè€Œç”µæºçº¿ä¸èƒ½ç”¨ä½œæ•°æ®çº¿ã€‚\nå¦‚æœæ’å…¥ç”µè„‘é©±åŠ¨å®‰è£…æ— ååº”è¯·é€‰æ‹©åˆ«çš„æ•°æ®çº¿ã€‚\nè¯·é€‰æ‹©æ­£ç¡®çš„æ•°æ®çº¿ä»¥ä¿è¯å¼€å‘æ¿è¿æ¥ç”µè„‘æ—¶èƒ½æ­£å¸¸å®‰è£…é©±åŠ¨ï¼ï¼ï¼\næ•°æ®çº¿çš„æ¥çº¿æ–¹å¼\nçº¢çº¿ï¼šç”µæºæ­£æï¼ˆæ¥çº¿ä¸Šçš„æ ‡è¯†ä¸ºï¼š+5Væˆ–VCCï¼‰\nç™½çº¿ï¼šè´Ÿç”µå‹æ•°æ®çº¿ï¼ˆæ ‡è¯†ä¸ºï¼šData-æˆ–USB Port -ï¼‰\nç»¿çº¿ï¼šæ­£ç”µå‹æ•°æ®çº¿ï¼ˆæ ‡è¯†ä¸ºï¼šData+æˆ–USB Port +ï¼‰\né»‘çº¿ï¼šæ¥åœ°ï¼ˆæ ‡è¯†ä¸ºï¼šGROUNDæˆ–GNDï¼‰\nå……ç”µçº¿çš„æ¥çº¿æ–¹å¼\nçº¢çº¿ï¼šç”µæºæ­£æï¼ˆæ¥çº¿ä¸Šçš„æ ‡è¯†ä¸ºï¼š+5Væˆ–VCCï¼‰\né»‘çº¿ï¼šæ¥åœ°ï¼ˆæ ‡è¯†ä¸ºï¼šGROUNDæˆ–GNDï¼‰\nè½¯ä»¶å‡†å¤‡ï¼š\n1.Arduino IDEï¼ˆå®˜ç½‘å®‰è£…ï¼‰\n2.é©±åŠ¨\n3.ä¸²å£è°ƒè¯•åŠ©æ‰‹ï¼ˆé€šè¿‡Microsoft Storeè¿›è¡Œå®‰è£…ï¼‰\nå®‰è£…é©±åŠ¨\né©±åŠ¨ä¸‹è½½é“¾æ¥ï¼šhttps://www.wch.cn/download/CH341SER_EXE.html\n1.å°†å¼€å‘æ¿é€šè¿‡usbæ•°æ®çº¿è¿æ¥è‡³ç”µè„‘\n2.å¯åŠ¨CH341SER.EXEå¹¶è¿›è¡Œå®‰è£…\n3.é€šè¿‡è®¾å¤‡ç®¡ç†å™¨æŸ¥çœ‹æ˜¯å¦å®‰è£…æˆåŠŸ\nåŸç† esp8266å¼€å‘æ¿ä½œä¸ºæœåŠ¡å™¨ï¼Œå®¢æˆ·ç«¯é€šè¿‡è®¿é—®æœåŠ¡å™¨çš„é¡µé¢æ¥æ§åˆ¶sg90èˆµæœºè¿›è¡Œæ—‹è½¬\næ­¥éª¤ 1.æ¥çº¿\nå¼•è„šè¯´æ˜å›¾\nå¦‚å›¾\nå…¨æ™¯\nespè§†è§’\næœé‚¦çº¿è§†è§’\nåŸç†è§£é‡Š\n2.ä»£ç ç¼–å†™\nServoåº“è¿ç”¨\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 #include \u0026lt;Servo.h\u0026gt; #include \u0026lt;ESP8266WiFi.h\u0026gt; #include \u0026lt;ESP8266WebServer.h\u0026gt; //WiFiåç§°\u0026amp;å¯†ç  const char* ssid = \u0026#34;Redmi_97DD\u0026#34;; const char* password = \u0026#34;12345678\u0026#34;; ESP8266WebServer server(80); Servo servo; String html = \u0026#34;\u0026lt;!DOCTYPE html\u0026gt;\u0026lt;html lang=\\\u0026#34;en\\\u0026#34;\u0026gt;\u0026lt;head\u0026gt;\u0026lt;meta charest=\\\u0026#34;UTF-8\\\u0026#34;\u0026gt;\u0026lt;title\u0026gt;Document\u0026lt;/title\u0026gt;\u0026lt;/head\u0026gt;\u0026lt;body\u0026gt;\u0026lt;a href=\\\u0026#34;./swi?light=on\\\u0026#34;\u0026gt;\u0026lt;input type=\\\u0026#34;button\\\u0026#34; value=\\\u0026#34;\u0026amp;#x5F00;\u0026amp;#x706F;\\\u0026#34;\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;a href=\\\u0026#34;./swi?light=off\\\u0026#34;\u0026gt;\u0026lt;input type=\\\u0026#34;button\\\u0026#34; value=\\\u0026#34;\u0026amp;#x5173;\u0026amp;#x706F;\\\u0026#34;\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/body\u0026gt;\u0026lt;/html\u0026gt;\u0026#34;; String onJson = \u0026#34;{\\\u0026#34;msg\\\u0026#34;: 200,\\\u0026#34;light\\\u0026#34;: \\\u0026#34;on\\\u0026#34;}\u0026#34;; String offJson = \u0026#34;{\\\u0026#34;msg\\\u0026#34;: 200,\\\u0026#34;light\\\u0026#34;: \\\u0026#34;off\\\u0026#34;}\u0026#34;; void swi(){ if(server.arg(\u0026#34;light\u0026#34;)==\u0026#34;on\u0026#34;){ server.send(200, \u0026#34;application/json\u0026#34;, onJson); servo.write(180); delay(1000); servo.write(90); }else if(server.arg(\u0026#34;light\u0026#34;)==\u0026#34;off\u0026#34;){ server.send(200, \u0026#34;application/json\u0026#34;, offJson); servo.write(0); delay(1000); servo.write(90); } } void handleRoot() { server.send(200, \u0026#34;text/html\u0026#34;, html); } void handleNotFound(){ server.send(404, \u0026#34;text/plain\u0026#34;, \u0026#34;404: Not found\u0026#34;); } void setup() { Serial.begin(9600); Serial.println(\u0026#34;\u0026#34;); servo.attach(D5); WiFi.mode(WIFI_STA); WiFi.begin(ssid, password); Serial.print(\u0026#34;\\r\\nConnecting to \u0026#34;); Serial.print(ssid); Serial.println(\u0026#34; ...\u0026#34;); int i = 0; while (WiFi.status() != WL_CONNECTED) { delay(1000); Serial.print(\u0026#34;waiting for \u0026#34;); Serial.print(i++); Serial.println(\u0026#34;s...\u0026#34;); } Serial.println(\u0026#34;\u0026#34;); Serial.println(\u0026#34;WiFi connected!\u0026#34;); Serial.print(\u0026#34;IP address: \u0026#34;); Serial.println(WiFi.localIP()); server.begin(); server.on(\u0026#34;/\u0026#34;, handleRoot); server.on(\u0026#34;/swi\u0026#34;,HTTP_GET, swi); server.onNotFound(handleNotFound); Serial.println(\u0026#34;HTTP server started\u0026#34;); } void loop() { server.handleClient(); } 3.çƒ§å½•ä»£ç å¹¶ä¸ºå¼€å‘æ¿æ¥ç”µæº\n4.é€šè¿‡ipåœ°å€è®¿é—®espæœåŠ¡å™¨\nç”µè„‘ç«¯é€šè¿‡æ‰“å°å‡ºçš„ipåœ°å€ç›´æ¥è¿›è¡Œè®¿é—®ï¼Œæ•ˆæœå¦‚ä¸‹ï¼š\nç°åœ¨å°±å¯ä»¥ç›´æ¥é€šè¿‡æŒ‰é’®è¿›è¡Œèˆµæœºçš„æ§åˆ¶ã€‚\n","permalink":"https://www.otifik.xyz/posts/tech/esp8266_sg90/","summary":"å¦‚ä½•ç”¨esp8266å¼€å‘æ¿æ§åˆ¶sg90è¿›è¡Œæ—‹è½¬ æ‰€éœ€å·¥å…· ç¡¬ä»¶å‡†å¤‡ï¼š\n1.esp8266 CH340å¼€å‘æ¿\n2.sg90èˆµæœº\n3.æœé‚¦çº¿è‹¥å¹²\n4.ä¸€æ ¹microusbæ•°æ®çº¿ï¼ˆä¸åŒusbæ•°æ®çº¿çš„åŒºåˆ«ï¼‰\nè¯·æ³¨æ„ä¸åŒusbæ•°æ®çº¿çš„åŒºåˆ«ï¼ï¼ï¼\nä¸€èˆ¬æœ‰ä¸¤ç§usbæ•°æ®çº¿ï¼Œä¸€ç§æ˜¯å……ç”µçº¿ï¼Œå¦ä¸€ç§æ˜¯æ•°æ®çº¿ã€‚\nå……ç”µçº¿å’Œæ•°æ®çº¿çš„åŒºåˆ«åœ¨äºå……ç”µçº¿æ— æ³•ä¼ è¾“æ•°æ®ï¼Œè€Œæ•°æ®çº¿å¯ä»¥ä¼ è¾“æ•°æ®ã€‚\nä¸€èˆ¬æ•°æ®çº¿å’Œå……ç”µçº¿éƒ½æ˜¯ç”¨USBæ¥å£çš„ï¼Œä¸€èˆ¬éƒ½ä¼šæœ‰å››æ ¹çº¿ã€‚å……ç”µçº¿ç”¨åˆ°çš„æ˜¯ç”µæºçš„VCCå’ŒGNDè¿™ä¸¤ä¸ªçº¿ï¼Œè€Œæ•°æ®çº¿æ˜¯ç”¨åˆ°VCCï¼ŒGNDï¼Œå’Œä¸¤æ ¹é€šä¿¡çº¿ã€‚æ•°æ®çº¿åœ¨USBæ¥å£é‚£è·Ÿçº¿é‡Œæœ‰å››æ¡çº¿ï¼Œè€Œç”µæºçº¿åœ¨USBé‚£ä¸ªçº¿é‡Œæœ‰ä¸¤æ¡çº¿ï¼Œæ‰€ä»¥ï¼Œæ•°æ®çº¿å¯ä»¥å½“ç”µæºçº¿ï¼Œè€Œç”µæºçº¿ä¸èƒ½ç”¨ä½œæ•°æ®çº¿ã€‚\nå¦‚æœæ’å…¥ç”µè„‘é©±åŠ¨å®‰è£…æ— ååº”è¯·é€‰æ‹©åˆ«çš„æ•°æ®çº¿ã€‚\nè¯·é€‰æ‹©æ­£ç¡®çš„æ•°æ®çº¿ä»¥ä¿è¯å¼€å‘æ¿è¿æ¥ç”µè„‘æ—¶èƒ½æ­£å¸¸å®‰è£…é©±åŠ¨ï¼ï¼ï¼\næ•°æ®çº¿çš„æ¥çº¿æ–¹å¼\nçº¢çº¿ï¼šç”µæºæ­£æï¼ˆæ¥çº¿ä¸Šçš„æ ‡è¯†ä¸ºï¼š+5Væˆ–VCCï¼‰\nç™½çº¿ï¼šè´Ÿç”µå‹æ•°æ®çº¿ï¼ˆæ ‡è¯†ä¸ºï¼šData-æˆ–USB Port -ï¼‰\nç»¿çº¿ï¼šæ­£ç”µå‹æ•°æ®çº¿ï¼ˆæ ‡è¯†ä¸ºï¼šData+æˆ–USB Port +ï¼‰\né»‘çº¿ï¼šæ¥åœ°ï¼ˆæ ‡è¯†ä¸ºï¼šGROUNDæˆ–GNDï¼‰\nå……ç”µçº¿çš„æ¥çº¿æ–¹å¼\nçº¢çº¿ï¼šç”µæºæ­£æï¼ˆæ¥çº¿ä¸Šçš„æ ‡è¯†ä¸ºï¼š+5Væˆ–VCCï¼‰\né»‘çº¿ï¼šæ¥åœ°ï¼ˆæ ‡è¯†ä¸ºï¼šGROUNDæˆ–GNDï¼‰\nè½¯ä»¶å‡†å¤‡ï¼š\n1.Arduino IDEï¼ˆå®˜ç½‘å®‰è£…ï¼‰\n2.é©±åŠ¨\n3.ä¸²å£è°ƒè¯•åŠ©æ‰‹ï¼ˆé€šè¿‡Microsoft Storeè¿›è¡Œå®‰è£…ï¼‰\nå®‰è£…é©±åŠ¨\né©±åŠ¨ä¸‹è½½é“¾æ¥ï¼šhttps://www.wch.cn/download/CH341SER_EXE.html\n1.å°†å¼€å‘æ¿é€šè¿‡usbæ•°æ®çº¿è¿æ¥è‡³ç”µè„‘\n2.å¯åŠ¨CH341SER.EXEå¹¶è¿›è¡Œå®‰è£…\n3.é€šè¿‡è®¾å¤‡ç®¡ç†å™¨æŸ¥çœ‹æ˜¯å¦å®‰è£…æˆåŠŸ\nåŸç† esp8266å¼€å‘æ¿ä½œä¸ºæœåŠ¡å™¨ï¼Œå®¢æˆ·ç«¯é€šè¿‡è®¿é—®æœåŠ¡å™¨çš„é¡µé¢æ¥æ§åˆ¶sg90èˆµæœºè¿›è¡Œæ—‹è½¬\næ­¥éª¤ 1.æ¥çº¿\nå¼•è„šè¯´æ˜å›¾\nå¦‚å›¾\nå…¨æ™¯\nespè§†è§’\næœé‚¦çº¿è§†è§’\nåŸç†è§£é‡Š\n2.ä»£ç ç¼–å†™\nServoåº“è¿ç”¨\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 #include \u0026lt;Servo.","title":"é€šè¿‡ESP8266CH340æ§åˆ¶sg90èˆµæœº"},{"content":"Bç«™ä¸Šå¯ä»¥çœ‹åˆ°ä¸€éƒ¨åˆ†æ‰‹å…ƒè§†é¢‘å“¦ æŒ‡è·¯ğŸ‘‰æˆ‘å–‚æ‘¸é±¼è¢‹ç›\nMalody é€šè¿‡malody regular dan v2 3 (2022/10/20) é€šè¿‡malody regular dan v3 4 (2022/11/18) é€šè¿‡malody regular dan v3 5 (2022/2/24) é€šè¿‡malody regular dan v3 6 (2022/4/22) Project Sekai Phigros BanG! Dream ","permalink":"https://www.otifik.xyz/posts/other/rhythmgame/","summary":"Bç«™ä¸Šå¯ä»¥çœ‹åˆ°ä¸€éƒ¨åˆ†æ‰‹å…ƒè§†é¢‘å“¦ æŒ‡è·¯ğŸ‘‰æˆ‘å–‚æ‘¸é±¼è¢‹ç›\nMalody é€šè¿‡malody regular dan v2 3 (2022/10/20) é€šè¿‡malody regular dan v3 4 (2022/11/18) é€šè¿‡malody regular dan v3 5 (2022/2/24) é€šè¿‡malody regular dan v3 6 (2022/4/22) Project Sekai Phigros BanG! Dream ","title":"éŸ³æ¸¸ç”Ÿæ¶¯è®°å½•(æµé‡è­¦å‘Š)"}]